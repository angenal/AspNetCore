/*!
 *   Administrator Dormitory Infromation Edit Page JavaScript v1.0.0
 *   Author: Danvic712
 */
$(function(){$(document).on("change","#edit_bunk",function(){$(this).val()!=="-1"?$("#edit_count").val($("#edit_bunk").find("option:checked").attr("data_count")):$("#edit_count").val("0")});$(document).on("click","#save",function(){if($("#edit_name").val().length===0)return bootbox.dialog({message:"宿舍号不能为空"}),!1;if($("#edit_building").val()==="-1")return bootbox.dialog({message:"请选择所属宿舍楼"}),!1;if($("#edit_floor").val()==="0")return bootbox.dialog({message:"所在楼层不能为0"}),!1;if($("#edit_bunk").val()==="-1")return bootbox.dialog({message:"请选择宿舍类型"}),!1;if($("#edit_count").val()==="0")return bootbox.dialog({message:"可容纳人数不能为0"}),!1;var n={};n.Id=$(this).attr("data-id");n.Name=$("#edit_name").val();n.BuildingId=$("#edit_building").val();n.Floor=$("#edit_floor").val();n.BunkId=$("#edit_bunk").val();n.Count=$("#edit_count").val();n.IsEnabled=$("#enable").val();$(this).attr("disabled","disabled");$.ajax({type:"POST",url:"/Administrator/Dormitory/EditInformation",data:n,dataType:"json",success:function(n){n.msg!==undefined&&(bootbox.dialog({message:n.msg}),n.success&&setTimeout(function(){window.location.href="/Administrator/Dormitory/Information"},2e3));$("#save").removeAttr("disabled")},error:function(n){console.log(n);$("#save").removeAttr("disabled")}})})});