/*!
 *   Administrator Edit Staff Page JavaScript v1.0.0
 *   Author: Danvic712
 */
$(function(){$("input").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green",increaseArea:"20%"});$(document).on("change","#department",function(){$(this).val()!=="-1"?$("#deptnumber").val($(this).val()):$("#deptnumber").val("")});$(document).on("blur","#account",function(){$(this).val()!==""&&$.ajax({type:"POST",url:"/Administrator/Basic/CheckAccount",data:{account:$(this).val()},dataType:"json",success:function(n){n.success&&bootbox.dialog({message:n.msg})}})});$(document).on("click","#save",function(){if($("#account").val().length===0)return bootbox.dialog({message:"登录账户名不能为空"}),!1;if($("#password").val().length===0)return bootbox.dialog({message:"登录密码不能为空"}),!1;if($("#name").val().length===0)return bootbox.dialog({message:"用户姓名不能为空"}),!1;if($("#idnumber").val().length===0)return bootbox.dialog({message:"身份证号不能为空"}),!1;if($("#department").val()==="-1")return bootbox.dialog({message:"请选择所属院系信息"}),!1;if($("#deptnumber").val().length===0)return bootbox.dialog({message:"院系编号不能为空"}),!1;var n={};n.Id=$(this).attr("data-id");n.Name=$("#name").val();n.Account=$("#account").val();n.Email=$("#email").val();n.DepartmentId=$("#deptnumber").val();n.Phone=$("#phone").val();n.Wechat=$("#wechat").val();n.QQ=$("#qq").val();n.Password=$("#password").val();n.Gender=$('input:radio[name="gender"]:checked').val();n.Age=$("#age").val();n.IdNumber=$("#idnumber").val();n.IsMaster=$('input:radio[name="master"]:checked').val();n.Address=$("#address").val();n.IsEnabled=$("#enable").val();$(this).attr("disabled","disabled");$.ajax({type:"POST",url:"/Administrator/Basic/EditStaff",data:n,dataType:"json",success:function(n){n.msg!==undefined&&(bootbox.dialog({message:n.msg}),n.success&&setTimeout(function(){window.location.href="/Administrator/Basic/Staff"},2e3));$("#save").removeAttr("disabled")},error:function(n){console.log(n);$("#save").removeAttr("disabled")}})})});