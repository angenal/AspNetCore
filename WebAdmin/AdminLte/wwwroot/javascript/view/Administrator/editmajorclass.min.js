/*!
 *   Administrator MajorClass Edit Page JavaScript v1.0.0
 *   Author: Danvic712
 */
$(function(){$(document).on("change","#department",function(){$(this).val()!=="-1"?$("#deptnumber").val($(this).val()):$("#deptnumber").val("")});$(document).on("change","#instructor",function(){$(this).val()!=="-1"?$("#insnumber").val($(this).val()):$("#insnumber").val("")});$(document).on("click","#save",function(){if($("#name").val().length===0)return bootbox.dialog({message:"班级名称不能为空"}),!1;if($("#major").val().length===0)return bootbox.dialog({message:"所属专业不能为空"}),!1;if($("#code").val().length===0)return bootbox.dialog({message:"专业代码不能为空"}),!1;if($("#department").val()==="-1")return bootbox.dialog({message:"请选择所属院系信息"}),!1;if($("#deptnumber").val().length===0)return bootbox.dialog({message:"院系编号不能为空"}),!1;if($("#instructor").val()==="-1")return bootbox.dialog({message:"请选择班级辅导员信息"}),!1;if($("#deptnumber").val().length===0)return bootbox.dialog({message:"辅导员工号不能为空"}),!1;var n={};n.Id=$(this).attr("data-id");n.Name=$("#name").val();n.MajorCode=$("#code").val();n.MajorName=$("#major").val();n.DepartmentId=$("#deptnumber").val();n.DepartmentName=$("#department option:selected").text();n.Wechat=$("#wechat").val();n.QQ=$("#qq").val();n.InstructorId=$("#insnumber").val();n.InstructorName=$("#instructor option:selected").text();n.SessionNum=$("#session").val();n.IsEnabled=$("#enable").val();$(this).attr("disabled","disabled");$.ajax({type:"POST",url:"/Administrator/School/EditMajorClass",data:n,dataType:"json",success:function(n){n.msg!==undefined&&(bootbox.dialog({message:n.msg}),n.success&&setTimeout(function(){window.location.href="/Administrator/School/MajorClass"},2e3));$("#save").removeAttr("disabled")},error:function(n){console.log(n);$("#save").removeAttr("disabled")}})})});